<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <button id="btn">click</button>
  <script>
    // A
    btn.addEventListener('click', () => {
      Promise.resolve().then(() => { console.log(1) });
      console.log(2);
    });
    // B
    btn.addEventListener('click', () => {
      Promise.resolve().then(() => { console.log(3) });
      console.log(4);
    });
    // 点击 click 按钮之后：2 1 4 3
    // 点击事件的监听函数是宏任务
    // 手动点击事件是分开触发的，产生两个宏任务（新的代码段） A B，按照先后顺序执行
    // A: 执行同步代码，生成了一个微任务，log2 ，执行微任务 log1
    // B: 执行同步代码，生成了一个微任务，log4 ，执行微任务 log3


    // 模拟浏览器点击事件
    btn.click();
    // 2 4 1 3
    // 模拟点击事件，只产生了一个宏任务，A、B 都在这个宏任务，里面代码按照事件顺序执行。
    // btn.click(); 同步代码触发了 A、B 的监听。log2、log4 都是同步代码
  </script>
</body>

</html>